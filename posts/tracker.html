<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Domino Weir</title>

    <!-- Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">
    <link href="../css/blog.css" rel="stylesheet">
    <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
  </head>

  <body>
    <!-- Static navbar -->
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#"></a>
        </div>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="../index.html">Home <span class="sr-only">(current)</span></a></li>
            <li><a href="../about.html">About</a></li>
            <li><a href="github.html">Blog</a></li>
            <li><a href="https://drive.google.com/file/d/0BwOvqtYr5BmDdF9yQ3pUbzZ6Zkk/view?usp=sharing">Resume</a></li>
            <li><a href="../contact.html">Contact</a></li>
          </ul>
      </div><!--/.container-fluid -->
    </nav>


    <div class="row">

      <div class="col-sm-1"></div>

      <div class="col-sm-9 blog-main">

        <div class="blog-post">
          <h2 class="blog-post-title">Human Tracking with a Background Subtractor in Python</h2>
          <p class="blog-post-meta">July 6th, 2017</p><!-- date goes here -->
          <p><em>Note: this post was originally featured on minionhut.com as a record of my freshman year research project</em></p>
          <p>Michael (my grad student) gave me an existing piece of code in C++ written by someone else that he improved upon that performs human tracking; my job is to transfer this code in to Python for our own uses. The C++ version worked "scarily well" according to Michael and since most of the operations used in his code exist in Python I hope that my version will function equally well. One thing to note is that the camera Michael used was much higher quality and more sensitive than my webcam. Essentially what I've got going on right now is taking an image such as this from a camera feed: </p>
          <div class="container text-center">
            <img src="http://res.cloudinary.com/de9kbeo0h/image/upload/w_300/tosgnjghjged66kf8umj.jpg">
          </div>
          <p>Then, I applied Canny edge detection to find the edge of objects in both the background and foreground and a couple other morphological transforms to clean up the image (this is the part where my code differs from Michael's because of camera quality):</p>
          <div class="container text-center">
            <img src="http://res.cloudinary.com/de9kbeo0h/image/upload/w_300/ct42ha6uw8ihiqhgc3ap.jpg">
          </div>
          <p>Finally I used a background subtraction algorithm that learns from the camera feed what the background looks like, leaving behind only the foreground (which in this case is moving objects such as me waving my hands or moving around my rolling desk chair). The low image quality is a function of this being a screenshot of a video of me moving, not of the program's quality.</p>
          <div class="container text-center">
            <img src="http://res.cloudinary.com/de9kbeo0h/image/upload/w_300/inl3e5o14pkckkvfom5r.jpg">
          </div>
          <p>Now that we've gotten an image and cleaned it up quite a bit, we can start looking for objects. An object we want to track will have to be large enough to be something other than noise but smaller than the entire screen (the actual max size is 3/2 the screen size). So, the primary way in which we decide if an object is worth tracking is by its area. The object's area can be found by using its moments. Image moments are very hard to explain simply because there's so much calculus involved in the technical definition. I think the best way to think about them without getting too complex is as an average of pixel intensities. The function cv2.moments() returns a dictionary of these values which can then be used to calculate other helpful things like area and center of mass.</p>
          <div class="container text-center">
            <img src="http://res.cloudinary.com/de9kbeo0h/image/upload/v1434383812/jzxmk1nl6pvzlemnn2kw.gif">
          </div>
          <p>This clearly requires some fine tuning. Right now, the resulting frames are not picking up a single object, me in my desk chair, but rather individual movements of my arms and head. The fixer for this is to add another condition to finding an object. Not only must the selected contour have an area within the range mentioned above, it also must be greater than the area of the last object found, which is stored in the variable refArea. This variable is intialized at zero and changes as more objects are found. With this new condition, the result now looks like this: </p>
          <div class="container text-center">
            <img src="http://res.cloudinary.com/de9kbeo0h/image/upload/v1434384196/dao0901pqa4xud1qepcx.gif">
          </div>
          <p>Now the camera picks up more of my image but is still very inaccurate and does not follow me frame by frame continuously. This program needs to be tweaked even more. One minor fix is resetting the reference area for each frame, this way an object moving away from the camera can be tracked despite its area decreasing. Another simple adjustment was increasing the lower bound on object area- this way fewer random small movements are interpreted incorrectly. An example of this would be the webcam picking up the logo on my tshirt as something different from my overall shape. However, the resulting video still did not show the program tracking objects continuously for more than a few frames at a time. </p>
          <p>In other news, I'm going to have this project and its continuation added to my class schedule for the fall as EE360, which is listed as "Special Problems in Electrical Engineering" but really just means "Undergrad Research for ECE Credit." What's cool about this is this class can actually count toward my BSEE degree as an academic enrichment class. It's a great opportunity for me to have a major sequence class under my belt despite being a lowly sophomore. This makes it so that every class I will take next semester will be STEM related, which is going to be so much fun though probably very difficult. </p>
        </div><!-- /.blog-post -->

      </div><!-- /.blog-main -->

      <div class="col-sm-2 blog-sidebar">
          <div class="sidebar-module .text-center">
            <img src="../files/blogicon.png" class="img-circle"></img>
            <h4><a href="about.html">More About the Author</a></h4>
          </div>
        <div class="sidebar-module">
          <h4>Archives</h4>
          <ol class="list-unstyled">
            <li><a href="github.html">Freshman Introduction to Git</a></li>
            <li><a href="tracker.html">Human Tracking with Background Subtraction in Python</a></li>
            <li><a href="cascades.html">Human Tracking with Cascade Classifiers in Python</a></li>
          </ol>
        </div>
        <div class="sidebar-module">
          <h4>Links</h4>
          <ol class="list-unstyled">
            <li><a href="https://github.com/dominoweir">GitHub</a></li>
            <li><a href="https://www.linkedin.com/in/domino-weir/">LinkedIn</a></li>
          </ol>
        </div>
      </div><!-- /.blog-sidebar -->

    </div><!-- /.row -->

  </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>
